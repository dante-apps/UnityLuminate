var g=(n,o,t)=>new Promise((r,e)=>{var s=c=>{try{a(t.next(c))}catch(d){e(d)}},i=c=>{try{a(t.throw(c))}catch(d){e(d)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,i);a((t=t.apply(n,o)).next())});import{_ as E,c as k,a as _,r as h,o as P,b as m,d as b,e as w,f as O,g as R,h as A,i as H,j as I,k as N}from"./vendor.3a8f86e3.js";const S=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(e){if(e.ep)return;e.ep=!0;const s=t(e);fetch(e.href,s)}};S();const j={},U={id:"app"};function V(n,o){const t=h("HeaderNavbar"),r=h("router-view");return P(),k("div",U,[_(t),_(r)])}var $=E(j,[["render",V]]);const x="modulepreload",y={},C="/assets/unityluminate/booking/",L=function(o,t){return!t||t.length===0?o():Promise.all(t.map(r=>{if(r=`${C}${r}`,r in y)return;y[r]=!0;const e=r.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":x,e||(i.as="script",i.crossOrigin=""),i.href=r,document.head.appendChild(i),e)return new Promise((a,c)=>{i.addEventListener("load",a),i.addEventListener("error",c)})})).then(()=>o())},f=m({url:"frappe.auth.get_logged_user",cache:"User",onError(n){n&&n.exc_type==="AuthenticationError"&&l.push({name:"LoginPage"})}});function p(){let o=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return o==="Guest"&&(o=null),o}const u=b({login:m({url:"login",makeParams({email:n,password:o}){return{usr:n,pwd:o}},onSuccess(n){f.reload(),u.user=p(),u.login.reset(),l.replace(n.default_route||"/")}}),logout:m({url:"logout",onSuccess(){f.reset(),u.user=p(),l.replace({name:"Login"})}}),user:p(),isLoggedIn:w(()=>!!u.user)}),q=[{path:"/",name:"Home",component:()=>L(()=>import("./Home.5e60ac14.js"),["assets/Home.5e60ac14.js","assets/vendor.3a8f86e3.js","assets/vendor.831b2bbf.css"])},{name:"Login",path:"/account/login",component:()=>L(()=>import("./Login.934ed602.js"),["assets/Login.934ed602.js","assets/vendor.3a8f86e3.js","assets/vendor.831b2bbf.css"])}];let l=O({history:R("/frontend"),routes:q});l.beforeEach((n,o,t)=>g(void 0,null,function*(){let r=u.isLoggedIn;try{yield f.promise}catch(e){r=!1}n.name==="Login"&&r?t({name:"Home"}):n.name!=="Login"&&!r?t({name:"Login"}):t()}));A({components:I,directives:N});const v=H($);v.use(l);v.mount("#app");export{u as s};
